from enum import Enum
from datetime import datetime
from fastapi import UploadFile
from typing import Optional, List
from pydantic import BaseModel, EmailStr
#===============================================================================================================================================================================================================================================
class EmailFolder(str, Enum):
    INBOX = "INBOX"
    SENT = "SENT"
    DRAFTS = "DRAFT"  
    TRASH = "trash"
    ARCHIVE = "archive"
#===============================================================================================================================================================================================================================================
class EmailBase(BaseModel):
    to_email: EmailStr
    subject: str
    body: str
#===============================================================================================================================================================================================================================================
class EmailCreate(BaseModel):
    to_email: str
    subject: str
    body: str
    attachment: Optional[UploadFile] = None
#===============================================================================================================================================================================================================================================
class EmailUpdate(BaseModel):
    to_email: Optional[EmailStr] = None
    subject: Optional[str] = None
    body: Optional[str] = None
    is_read: Optional[bool] = None
#===============================================================================================================================================================================================================================================
class EmailInDB(EmailBase):
    id: int
    user_id: int
    from_email: EmailStr
    is_read: bool
    is_sent: bool
    created_at: datetime
    folder: EmailFolder
    has_attachment: bool

    class Config:
        orm_mode = True
#===============================================================================================================================================================================================================================================
class EmailOut(EmailInDB):
    pass
#===============================================================================================================================================================================================================================================
class EmailPrompt(BaseModel):
    prompt: str
#===============================================================================================================================================================================================================================================
class EmailContent(BaseModel):
    content: str
#===============================================================================================================================================================================================================================================
class TemplateType(BaseModel):
    template_type: str
#===============================================================================================================================================================================================================================================
class AttachmentCreate(BaseModel):
    filename: str
    content: bytes
#===============================================================================================================================================================================================================================================
class AttachmentOut(BaseModel):
    id: int
    filename: str
    email_id: int

    class Config:
        orm_mode = True
#===============================================================================================================================================================================================================================================
class EmailWithAttachments(EmailOut):
    attachments: List[AttachmentOut] = []
#===============================================================================================================================================================================================================================================
class EmailForward(BaseModel):
    to_email: EmailStr
#===============================================================================================================================================================================================================================================
class EmailReply(BaseModel):
    body: str